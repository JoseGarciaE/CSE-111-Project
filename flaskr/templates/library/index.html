{% extends 'base.html' %}

{% block content %}
    <!-- LIBRARIAN -->
    {% if user == 'librarian' %}
        <h3>
            Welcome librarian {{ g.user['u_name'] }}!
        </h3>
        
        {% if not libraryUsers %}

        <h3>
            <form method="post">
                View Users
                <button name="button" type="submit" value="search users">Users</button>
            </form>
        </h3>

        {% endif %}

    {% if libraryUsers %}

        <h3>
            <form method="post">
                Return to Books  
                <button name="button" type="submit" value="return to books">Books</button>
            </form>
        </h3> 

        <h3>Registered Users at {{university["un_name"]}} </h3>
        
        <form method="post">
            <select name="filter" id="filter">
                <option value=""></option>
                <option value="name">Name</option>
                <option value="email">Email</option>
            </select>
            <input name="input" id="input">

            <button name="button" type="submit" value="filter users">Filter</button>
            <button name="button" type="submit" value="refresh books">Refresh</button>

        </form>
        
        <table border="1px black">
            <tr>
                <th>Name</th>
                <th>Email</th>
            </tr>
            {% for libraryUser in libraryUsers %}
            {% if not loop.last %}
            <tr>
                <td>{{ libraryUser['u_name']}}</td>
                <td>{{ libraryUser['u_email']}}</td>
            </tr>
            {% endif %}
            {% endfor %}
        
        </table>

    {% endif %}

    {% endif %}
    
    <!-- STUDENT -->
    {% if user == 'student' %}
        <h3>
            Welcome student {{ g.user['u_name'] }}!
        </h3>
    {% endif %}


    {% if books %}

        <h3>{{university["un_name"]}} Books</h3>

        <form method="post">
            <select name="filter" id="filter">
                <option value=""></option>
                <option value="title">Title</option>
                <option value="author">Author</option>
                <option value="year">Year</option>
                <option value="isbn">ISBN</option>
            </select>
            <input name="input" id="input">

            <button name="button" type="submit" value="filter books">Filter</button>
            <button name="button" type="submit" value="refresh books">Refresh</button>
        </form>

        {% if user == 'librarian' %}
            <h3>To insert a new book complete the following information:</h3>

            <form method="post">
                <label for="title">Title </label>
                <input type="text" id="title" name="title">

                <label for="author">Author </label>
                <input type="text" id="author" name="author">

                <label for="year">Year </label>
                <input type="text" id="year" name="year">

                <label for="isbn">ISBN </label>
                <input type="text" id="isbn" name="isbn">

                <label for="copies">Number of Copies</label>
                <input type="text" id="copies" name="copies">

                <button name="button" type="submit" value="insert books">Insert</button>

            </form>

        {% endif%}

        <br>

        <table border="1px black">
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Year</th>
                <th>ISBN</th>
            </tr>
        {% for book in books %}
            {% if not loop.last %}
            <tr>
                <td>{{ book['b_title']}}</td>
                <td>{{ book['a_authorname']}}</td>
                <td>{{ book['b_publishedyear']}}</td>
                <td>{{ book['b_isbn']}}</td>
            </tr>
            {% endif %}
        {% endfor %}

        </table>

    {% endif %}


{% endblock %}










